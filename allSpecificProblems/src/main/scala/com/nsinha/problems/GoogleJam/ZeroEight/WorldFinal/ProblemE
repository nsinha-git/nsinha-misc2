1. The problem can be thought of sending flow from source s connected via each of the edges of each block to t. Sources can send
flow in increment of 4.
2. When a block is marked untouched and no neighbors are marked then the edges are connected to t with capacity of 1. When such  a block is
marked it uses up capacity of its edges by 1 and also those edges get connected to alternate node t`.

3. In arbitrary uumarked block where neighbors are marked or else, when the block gets marked , its unmarked edges send flow to t
and t` edges send to t`. No further flow  through previosly marked edges is possible as an edge can be adjacent to atmost
2 blocks which got used up in case of t` (or earlier marked) edges.

4. The flow of network is total flow to T minus flow to t`.

5. We can now find  flow to t'. this is sum of all fully loaded in capacity that go t'. i.e double flow.
 If we are able to slectively choose the edges in optimal manner we can send flow back from t` to source.
 How to do this?

6. consider only those edges that are fully loaded up(both directions) and belong to changeable blocks.
We can create a graph between s and t` using only those participating edges in following way.
Group  4 edges that belong to a common block, we add one more serial link to source. The edges that cant be grouped are left open.
A edge under such grouping can at most participate in 2 paths to s. We only conisder blocks that contain flow of 3 or more.As anything else
would decrease the actual flow to t or leave it unchanged.

This is max flow problem from t` to s.